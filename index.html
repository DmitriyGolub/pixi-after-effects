<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
    <script src="node_modules/dat.gui/build/dat.gui.min.js"></script>
    <script src="dist/pixi-ae.min.js"></script>
  </head>
  <body>
    <script>
      var renderer = new PIXI.WebGLRenderer(2000, 600, { antialias: true, backgroundColor: 0xffffff });
      document.body.appendChild(renderer.view);
      var stage = new PIXI.Container();
      var ae = null;
      var interceptor = new PIXI.AEDataInterceptor({
          'D': {
              events: {
                  click: () => {
                      console.log("tapped D");
                  },
              }
          },
      });
      PIXI.AEDataLoader.loadJSONWithInterceptor('./examples/training/data.json', interceptor).then((data) => {
          ae = PIXI.AfterEffects.fromData(data);
          ae.scale = new PIXI.Point(0.5, 0.5);
          ae.on("completed", (o) => { console.log("completed!", o); });
          stage.addChild(ae);
      }, (err) => {
          console.log(err);
      });
      requestAnimationFrame(animate);
      function animate(nowTime) {
          if (ae) ae.update(nowTime);
          renderer.render(stage);
          requestAnimationFrame(animate);
      }
      var Menu = function() {
          this.play   = function() { ae.play() }
          this.loop   = function() { ae.play(true) }
          this.stop   = function() { ae.stop() }
          this.pause  = function() { ae.pause() }
          this.resume = function() { ae.resume() }
      };
      var menu  = new Menu();
      var panel = new dat.GUI();
      panel.add(menu, "play");
      panel.add(menu, "loop");
      panel.add(menu, "stop");
      panel.add(menu, "pause");
      panel.add(menu, "resume");
    </script>
  </body>
</html>
